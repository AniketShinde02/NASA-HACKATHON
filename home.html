<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Exoplanet Explorer</title>
    <script type="module" src="https://cdn.skypack.dev/three@0.129.0/build/three.module.js"></script>
    <script type="module" src="https://cdn.skypack.dev/three@0.129.0/examples/jsm/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
        #menu, #planetInfo {
            position: absolute;
            top: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            z-index: 10;
            transition: opacity 0.5s;
        }
        #menu { left: 20px; }
        #planetInfo {
            right: 20px;
            display: none;
            max-width: 300px;
        }
        h2, h3 {
            margin: 0;
            font-family: 'Arial', sans-serif;
        }
        p {
            font-family: 'Verdana', sans-serif;
            line-height: 1.5;
        }
        ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        li {
            cursor: pointer;
            margin-bottom: 5px;
            padding: 5px;
            border: 1px solid white;
            border-radius: 5px;
            transition: background 0.3s;
        }
        li:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 12px;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div id="menu"></div>
    <div id="planetInfo"></div>
    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.129.0/build/three.module.js';
        import { OrbitControls } from 'https://cdn.skypack.dev/three@0.129.0/examples/jsm/controls/OrbitControls.js';

        function startThreeJS() {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 30, 50);

            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            const controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5).normalize();
            scene.add(directionalLight);

            const starGeometry = new THREE.BufferGeometry();
            const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.1 });
            const starVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                starVertices.push(x, y, z);
            }
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);

            const loader = new THREE.TextureLoader();
            const exoplanets = [
                { name: 'Earth', texture: 'Textures/earth_texture.jpeg', size: 1, distance: 0, info: "Earth is the third planet from the Sun and the only astronomical object known to harbor life." },
                { name: 'Kepler-452b', texture: 'Textures/Kepler-452b.jpg', size: 1.3, distance: 20, info: "Kepler-452b is often called 'Earth's cousin' due to its similarities to our planet." },
                { name: 'Proxima Centauri b', texture: 'Textures/Ross 128b.jpg', size: 1.04, distance: 25, info: "Proxima Centauri b is the closest known exoplanet to our solar system." },
                { name: 'TRAPPIST-1e', texture: 'Textures/Trappist-1e.jpg', size: 0.78, distance: 30, info: "TRAPPIST-1e is one of seven Earth-size planets orbiting the ultra-cool dwarf star TRAPPIST-1." },
                { name: 'Gliese 581g', texture: 'Textures/gliese667Cc.jpg', size: 1.56, distance: 35, info: "Gliese 581g is a hypothetical exoplanet that, if confirmed, would be one of the most Earth-like planets discovered." },
                { name: 'HD 209458 b', texture: 'Textures/HD219134.jpg', size: 1.82, distance: 40, info: "HD 209458 b, nicknamed Osiris, was the first exoplanet to be seen transiting its star." },
                { name: 'Kepler-186f', texture: 'Textures/Kepler-186f.jpg', size: 1.17, distance: 45, info: "Kepler-186f was the first Earth-sized planet discovered in the habitable zone of another star." },
                { name: 'Kepler-22b', texture: 'Textures/Kepler 22b.png', size: 1.43, distance: 50, info: "Kepler-22b was among the first habitable zone planets found by NASA's Kepler Space Telescope." },
                { name: 'CoRoT-7b', texture: 'Textures/kepler68c.jpg', size: 0.91, distance: 55, info: "CoRoT-7b was one of the first super-Earths discovered." },
                { name: 'HD 189733 b', texture: 'Textures/HD219134.jpg', size: 1.69, distance: 60, info: "HD 189733 b is a hot Jupiter exoplanet known for its deep blue color." },
                { name: 'GJ 1214 b', texture: 'Textures/kepler62f.jpg', size: 1.04, distance: 65, info: "GJ 1214 b is a super-Earth exoplanet that orbits a red dwarf star." },
                { name: '55 Cancri e', texture: 'Textures/kepler442b.jpg', size: 1.3, distance: 70, info: "55 Cancri e is a super-Earth exoplanet located about 41 light-years away." },
                { name: 'Kepler-62f', texture: 'Textures/kepler62f.jpg', size: 1.17, distance: 75, info: "Kepler-62f is another candidate for potentially habitable planets." },
                { name: 'Kepler-69c', texture: 'Textures/kepler69c.jpg', size: 1.56, distance: 80, info: "Kepler-69c orbits in the habitable zone of its star." },
                { name: 'Kepler-10b', texture: 'Textures/kepler7b.jpg', size: 0.91, distance: 85, info: "Kepler-10b is an exoplanet discovered to be a rocky world." },
                { name: 'Kepler-90i', texture: 'Textures/wasp107b.jpg', size: 1.43, distance: 90, info: "Kepler-90i is part of a system that also has a number of planets." },
                { name: 'Kepler-16b', texture: 'Textures/wasp43b.jpg', size: 1.04, distance: 95, info: "Kepler-16b orbits a binary star system." },
                { name: 'Kepler-1647b', texture: 'Textures/AB aurigae.jpg', size: 1.69, distance: 100, info: "Kepler-1647b is another exoplanet in a binary system." }
            ];

            const planetMeshes = [];
            const menu = document.getElementById('menu');
            const planetInfo = document.getElementById('planetInfo');

            exoplanets.forEach((planet, index) => {
                const geometry = new THREE.SphereGeometry(planet.size, 64, 64);
                const material = new THREE.MeshPhongMaterial({
                    map: loader.load(planet.texture),
                    bumpMap: loader.load(planet.texture),
                    bumpScale: 0.05,
                    specularMap: loader.load(planet.texture),
                    specular: new THREE.Color('grey')
                });
                const planetMesh = new THREE.Mesh(geometry, material);
                
                if (planet.name !== 'Earth') {
                    planetMesh.position.x = Math.cos(index) * planet.distance;
                    planetMesh.position.z = Math.sin(index) * planet.distance;
                }
                
                scene.add(planetMesh);
                planetMeshes.push(planetMesh);

                const listItem = document.createElement('li');
                listItem.textContent = planet.name;
                listItem.onclick = () => focusOnPlanet(index);
                menu.appendChild(listItem);
            });

            function focusOnPlanet(index) {
                const targetPlanet = planetMeshes[index];
                const originalScale = targetPlanet.scale.x;
                
                gsap.to(targetPlanet.scale, { duration: 1, x: originalScale * 1.5, y: originalScale * 1.5, z: originalScale * 1.5 });
                
                gsap.to(camera.position, {
                    duration: 2,
                    x: targetPlanet.position.x,
                    y: targetPlanet.position.y + 5,
                    z: targetPlanet.position.z + 10,
                    onUpdate: () => {
                        camera.lookAt(targetPlanet.position);
                        controls.target.copy(targetPlanet.position);
                    },
                    onComplete: () => {
                        planetInfo.style.display = 'block';
                        planetInfo.innerHTML = `<h2>${exoplanets[index].name}</h2><p>${exoplanets[index].info}</p><button onclick="goBack()">Back</button>`;
                    },
                });
            }

            window.goBack = function() {
                gsap.to(camera.position, {
                    duration: 2,
                    x: 0,
                    y: 30,
                    z: 50,
                    onUpdate: () => {
                        camera.lookAt(scene.position);
                        controls.target.copy(scene.position);
                    },
                    onComplete: () => {
                        planetInfo.style.display = 'none';
                        planetMeshes.forEach(mesh => {
                            gsap.to(mesh.scale, { duration: 1, x: 1, y: 1, z: 1 });
                        });
                    },
                });
            };

            function animate() {
                requestAnimationFrame(animate);
                planetMeshes.forEach((mesh, index) => {
                    if (exoplanets[index].name === 'Earth') {
                        mesh.rotation.y += 0.005;
                    }
                });
                controls.update();
                renderer.render(scene, camera);
            }
            animate();

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        startThreeJS();
    </script>
</body>
</html>
